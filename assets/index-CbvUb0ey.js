import{r as x,F as e,G as ce,H as Ae,R as Me}from"./vendor-base-DBvmmGl1.js";import{r as Te,u as Be}from"./vendor-xlsx-BUW7exb-.js";import{C as Ie,U as fe,a as Re,F as Ee,A as Le,S as be,P as de,b as we,c as Oe,I as Ue,X as Pe,d as Fe,R as ne,e as De,f as qe,T as He,Z as xe,g as se,h as Ke,i as We,j as ze,L as Ge,M as Je,k as Ve,l as Ye,m as Ze,n as Xe,G as Qe,o as et}from"./vendor-icons-DnsFv7Zp.js";import{R as tt,L as st,C as at,X as nt,Y as rt,T as lt,a as me}from"./vendor-charts-BpewqmZv.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();const Ne={ä¸€å¹´çº§:["åº”ç”¨é¢˜â€”â€”æ¯”è¾ƒå¤šå°‘åˆæ­¥","åº”ç”¨é¢˜â€”â€”æ¯”è¾ƒå¤šå°‘è¿›é˜¶","é€»è¾‘æ¨ç†â€”â€”é¡ºåº","é€»è¾‘æ¨ç†â€”â€”ä¸ç­‰","é€»è¾‘æ¨ç†â€”â€”ç›¸ç­‰"],ä¸€å¹´çº§å¼¹çª—:["ç©ºé—´æƒ³è±¡â€”â€”æ­£æ–¹ä½“è®¡æ•°","ç©ºé—´æƒ³è±¡â€”â€”æ•°æ•°çœ‹ä¸è§","é€»è¾‘æ¨ç†â€”â€”é¡ºåº","é€»è¾‘æ¨ç†â€”â€”ä¸ç­‰","é€»è¾‘æ¨ç†â€”â€”ç›¸ç­‰"],äºŒå¹´çº§:["åº”ç”¨é¢˜â€”â€”å¤æ‚çš„æ’é˜Ÿé—®é¢˜åˆæ­¥","åº”ç”¨é¢˜â€”â€”å¤æ‚çš„æ’é˜Ÿé—®é¢˜è¿›é˜¶","åº”ç”¨é¢˜â€”â€”è¿˜åŸå€’æ¨","æ•°æ„Ÿâ€”â€”æ¨ªå¼æ•°å­—è°œåˆæ­¥","æ•°æ„Ÿâ€”â€”æ¨ªå¼æ•°å­—è°œè¿›é˜¶"],ä¸‰å¹´çº§:["åº”ç”¨é¢˜â€”â€”å¹´é¾„é—®é¢˜åˆæ­¥","åº”ç”¨é¢˜â€”â€”å¹´é¾„é—®é¢˜è¿›é˜¶","è½¬åŒ–æ€æƒ³â€”å·§æ±‚æœ€çŸ­è·¯çº¿","è®¡ç®—â€”â€”å·§å¡«ç®—ç¬¦","è®¡ç®—â€”â€”å·§è§£æ•´æ•°è®¡ç®—"],å››å¹´çº§:["ç›ˆäºé—®é¢˜","ç”Ÿæ´»ä¸­çš„è®¡æ•°åŸç†","å›¾å½¢ä¸­çš„è®¡æ•°åŸç†","é•¿æ–¹å½¢ä¸­çš„å€æ•°å…³ç³»","æ•°å½¢ç»“åˆ"],äº”å¹´çº§:["åŸºç¡€è¡Œç¨‹é—®é¢˜","ç¯å½¢è·¯çº¿é—®é¢˜","ç«è½¦è¡Œç¨‹é—®é¢˜","å°æ•°ä¹˜é™¤æ³•å·§ç®—","å°æ•°æå–å…¬å› æ•°"],å…­å¹´çº§:["é—´éš”å‘è½¦é—®é¢˜","ç‰¹æ®Šæ³•æ¯”è¾ƒåˆ†æ•°å¤§å°","æ“ä½œä¸è§„å¾‹","ä¸å®šæ–¹ç¨‹","çŸ­é™¤æ¨¡å‹"]},it=s=>{if(!s||isNaN(s))return"0åˆ†é’Ÿ";const r=Math.floor(s/3600),i=s%3600,l=Math.ceil(i/60);return r>0?`${r}å°æ—¶${l>0?` ${l}åˆ†é’Ÿ`:""}`:`${l}åˆ†é’Ÿ`},E=s=>{if(s==null)return 0;if(typeof s=="number")return s*100;if(typeof s=="string"){if(s.includes("%"))return parseFloat(s.replace("%",""));const r=parseFloat(s);return r<=1?r*100:r}return 0},te=s=>{if(typeof s=="number")return s;if(!s)return 0;const r=String(s).trim();if(r.includes("åˆ†")||r.includes("ç§’")){let l=0;const n=r.match(/(\d+)\s*åˆ†/),a=r.match(/(\d+)\s*ç§’/);return n&&(l+=parseInt(n[1],10)*60),a&&(l+=parseInt(a[1],10)),l}const i=parseFloat(r);return isNaN(i)?0:i},re=s=>{if(!s)return"æœªçŸ¥å¹´çº§";const r={pk:"å¹¼å„¿å›­å°ç­",k:"å¹¼å„¿å›­å¤§ç­",one:"ä¸€å¹´çº§",two:"äºŒå¹´çº§",three:"ä¸‰å¹´çº§",four:"å››å¹´çº§",five:"äº”å¹´çº§",six:"å…­å¹´çº§"},i=s.toLowerCase().trim();if(r[i])return r[i];const l=Object.keys(r).find(n=>i.includes(n));return l?r[l]:s},ot=(s,r)=>{const i=new Set;return s.forEach(l=>{if(l.real_name===r){const n=parseInt(String(l.level_sequence),10);isNaN(n)||i.add(n)}}),Array.from(i).sort((l,n)=>l-n)},ct=s=>{if(!s||s.length===0)return{valid:!1,error:"æ–‡ä»¶ä¸ºç©º"};const r=s[0],l=["real_name","level_sequence","unit_sequence","unit_finish_status","answer_right_rate","first_cost_seconds"].filter(n=>!(n in r));return l.length>0?{valid:!1,error:`ç¼ºå°‘å¿…è¦å­—æ®µ: ${l.join(", ")}`}:{valid:!0}},ue=s=>s>=4?{name:"é‡‘ç‰Œå®Œè¯¾ç‹",type:"completion",level:"gold",description:"é‡‘ç‰Œæˆå°±è¾¾æˆï¼å…¨è¯¾ç¨‹é€šå…³ï¼Œä½ å°±æ˜¯å­¦ä¹ ç‹è€…ï¼"}:{name:"å­¦ä¹ ä¹‹æ˜Ÿ",type:"completion",level:"star",description:"å­¦ä¹ ä¹‹æ˜Ÿå·²ç‚¹äº®ï¼è¡¨ç°éå¸¸äº®çœ¼ï¼ŒåŠ æ²¹å‘å‰å†²ï¼"},he=s=>s>=90?{name:"å­¦ä¹ å…¸èŒƒ",type:"accuracy",level:"model",description:"ä½ çš„å­¦ä¹ è´¨é‡æé«˜ï¼Œå±•ç°å…¸èŒƒçº§çš„æŒæ¡åŠ›ã€‚"}:{name:"ç¨³å®šé«˜æ‰‹",type:"accuracy",level:"master",description:"ç¨³å®šä¸”æ‰å®ï¼Œä¿æŒè¿™ä¸ªèŠ‚å¥ï¼"},ge=(s,r,i,l)=>{var j,g,o,y;if(!s||s.length===0)return null;const n=s.filter(N=>N.real_name===r);if(n.length===0)return null;const a=[],c=l?l.max:Math.max(...n.map(N=>parseInt(String(N.level_sequence),10))),h=n.filter(N=>parseInt(String(N.level_sequence),10)===c);if(i==="headteacher"){h.forEach(m=>{const S=parseInt(String(m.unit_sequence),10),O=E(m.answer_right_rate),H=E(m.pass_rate),_=s.filter(C=>parseInt(String(C.level_sequence),10)===c&&parseInt(String(C.unit_sequence),10)===S),p=_.filter(C=>E(C.answer_right_rate)>0),d=p.length>0?p.reduce((C,B)=>C+E(B.answer_right_rate),0)/p.length:0,L=_.filter(C=>E(C.pass_rate)>0),W=L.length>0?L.reduce((C,B)=>C+E(B.pass_rate),0)/L.length:0,P=_.filter(C=>te(C.first_cost_seconds)>0),K=P.length>0?P.reduce((C,B)=>C+te(B.first_cost_seconds),0)/P.length:0;a.push({unitNumber:S,unitName:S===0?"è¯¾å‰æµ‹":`ç¬¬${S}è®²`,timeSpentSeconds:te(m.first_cost_seconds),classTimeSpentSeconds:K,status:m.unit_finish_status==="å®Œè¯¾"?"high":"low",statusLabel:m.unit_finish_status==="å®Œè¯¾"?"å·²å®Œæˆ":"å­¦ä¹ ä¸­",accuracy:O,classAccuracy:d,passRate:H,classPassRate:W,wrongCount:parseInt(String(m.first_finish_answer_step_fail_cnt??m.wrong_answer_count??0)),analysis:""})}),a.sort((m,S)=>m.unitNumber-S.unitNumber);const N=a.find(m=>m.unitNumber===0);let v=0,M=0,T=0,u=0;a.forEach(m=>{m.unitNumber!==0&&(N&&m.accuracy>N.accuracy&&v++,m.status==="high"&&M++,m.timeSpentSeconds>0&&m.timeSpentSeconds<m.classTimeSpentSeconds&&T++,m.accuracy>=50&&u++)});const b=[{name:"å­¦ä¹ è¿›æ­¥å¾½ç« ",type:"accuracy",level:"progress",description:"æ¯ä¸€æ¬¡çªç ´ï¼Œéƒ½æ˜¯å¯¹è‡ªæˆ‘çš„è¶…è¶Šï¼Œä½ æ˜¯æœ€æ£’çš„è¿›æ­¥å°è¾¾äººï¼",stars:Math.min(5,v)},{name:"åšæŒå°è¾¾äºº",type:"completion",level:"growth",description:"æ»´æ°´ç©¿çŸ³ï¼Œä½ çš„æ¯ä¸€ä»½åšæŒéƒ½åœ¨ä¸ºæˆåŠŸçš„æœªæ¥é“ºè·¯ï¼Œç»§ç»­ä¿æŒï¼",stars:Math.min(5,M)},{name:"æ—¶é—´å°é£ä¾ ",type:"accuracy",level:"potential",description:"çµåŠ¨å¦‚é—ªç”µï¼Œä½ çš„é«˜æ•ˆæ€ç»´è®©å­¦ä¹ å˜å¾—å¦‚æ­¤è½»æ¾ï¼Œä¸ºä½ ç‚¹èµï¼",stars:Math.min(5,T)},{name:"æ»¡åˆ†å†²åˆºæ˜Ÿ",type:"accuracy",level:"master",description:"ç„å‡†ç›®æ ‡ï¼Œå…¨åŠ›ä»¥èµ´ï¼Œä½ çš„ä¸“æ³¨è®©æ¯ä¸€ä¸ªå…³å¡éƒ½å˜å¾—ç®€å•ï¼",stars:Math.min(5,u)}],k=a.reduce((m,S)=>m+S.timeSpentSeconds,0);return{studentName:r,grade:re((j=n[0])==null?void 0:j.package_grade),teacher:((g=n[0])==null?void 0:g.counselor_name)||"è€å¸ˆ",role:i,totalTimeSeconds:k,avgTimePerSession:k/(a.length||1),timeComment:"ä¸€èŠ‚è¯¾20åˆ†é’Ÿï¼ŒçŸ­æ—¶é«˜æ•ˆï¼Œæ¯å¤©ç»ƒå‡ºæ•ˆæœï¼",completionBadge:ue(0),accuracyBadge:he(0),htBadges:b,completedUnitsCount:a.filter(m=>m.status==="high").length,units:a,trendAnalysis:dt(a),errorAnalysis:xt(a),monthlySummary:{milestone:"",highlights:[],improvements:[]}}}else{const N=new Map;n.forEach(u=>{const b=parseInt(String(u.level_sequence),10);if(l&&(b<l.min||b>l.max))return;N.has(b)||N.set(b,{unitNumber:b,unitName:`ç¬¬${b}å•å…ƒ`,timeSpentSeconds:0,classTimeSpentSeconds:0,status:"low",statusLabel:"å­¦ä¹ ä¸­",accuracy:0,classAccuracy:0,passRate:0,classPassRate:0,wrongCount:0,analysis:""});const k=N.get(b);k.timeSpentSeconds+=te(u.first_cost_seconds),k.accuracy=(k.accuracy+E(u.answer_right_rate))/2,k.passRate=(k.passRate+E(u.pass_rate))/2,u.unit_finish_status==="å®Œè¯¾"&&(k.status="high")});const v=Array.from(N.values()).sort((u,b)=>u.unitNumber-b.unitNumber);v.forEach(u=>{const b=s.filter(S=>parseInt(String(S.level_sequence),10)===u.unitNumber),k=b.filter(S=>E(S.answer_right_rate)>0);u.classAccuracy=k.length>0?k.reduce((S,O)=>S+E(O.answer_right_rate),0)/k.length:0;const m=b.filter(S=>E(S.pass_rate)>0);u.classPassRate=m.length>0?m.reduce((S,O)=>S+E(O.pass_rate),0)/m.length:0,u.status==="high"&&(u.analysis=u.accuracy>=u.classAccuracy?"æŒæ¡æ‰å®ï¼Œè¶…è¶Šå¹³å‡":"æ€åº¦è®¤çœŸï¼Œè¯·å·©å›ºé”™é¢˜")});const M=v.reduce((u,b)=>u+b.timeSpentSeconds,0),T=v.reduce((u,b)=>u+b.accuracy,0)/(v.length||1);return{studentName:r,grade:re((o=n[0])==null?void 0:o.package_grade),teacher:((y=n[0])==null?void 0:y.counselor_name)||"è€å¸ˆ",role:i,totalTimeSeconds:M,avgTimePerSession:M/(v.length||1),timeComment:"å­¦ä¹ æ•ˆç‡å¾ˆé«˜ï¼Œè¡¨ç°å‡ºè‰²ã€‚",completionBadge:ue(v.filter(u=>u.status==="high").length),accuracyBadge:he(T),completedUnitsCount:v.filter(u=>u.status==="high").length,units:v,trendAnalysis:mt(v),monthlySummary:{milestone:"",highlights:[],improvements:[]}}}};function dt(s){const r=s.find(a=>a.unitNumber===0),i=s.filter(a=>a.unitNumber>0).sort((a,c)=>a.unitNumber-c.unitNumber);if(i.length===0)return{status:"stable",title:"å¼€å¯æŒ‘æˆ˜",content:"å®è´å·²å‡†å¤‡å°±ç»ªï¼ŒæœŸå¾…å¼€å¯ç²¾å½©çš„æ€ç»´é—¯å…³ä¹‹æ—…ï¼"};const l=i[i.length-1];let n=i.length>=2;for(let a=1;a<i.length;a++)if(i[a].accuracy<=i[a-1].accuracy){n=!1;break}if(n)return{status:"rising",title:"å®Œç¾çš„é˜¶æ¢¯å¼æˆé•¿",content:`å®Œç¾çš„é˜¶æ¢¯å¼æˆé•¿ï¼è¯¾ç¨‹è®¾è®¡çš„æ¯ä¸€æ­¥æŒ‘æˆ˜ï¼Œå­©å­éƒ½æ­¥æ­¥ä¸ºè¥ï¼Œæ­£ç¡®ç‡ä»${i[0].accuracy.toFixed(0)}%ä¸€è·¯ç¨³å®šå‡è‡³${l.accuracy.toFixed(0)}%ã€‚è¿™æ­£æ˜¯ç§‘å­¦å­¦ä¹ è·¯å¾„ä¸å­©å­åŠªåŠ›åŒé¢‘å…±æŒ¯çš„è¯æ˜ã€‚`};if(r){const a=r.accuracy.toFixed(0),c=l.accuracy.toFixed(0),h=Math.abs(l.accuracy-r.accuracy).toFixed(0),j=l.unitNumber;return l.accuracy>r.accuracy?{status:"improving",title:"è¿›æ­¥è·¨è¶Šï¼Œè¡¨ç°äº®çœ¼",content:`å¤ªæ£’äº†ï¼å¯¹æ¯”è¯¾å‰æµ‹ï¼ˆæ­£ç¡®ç‡${a}%ï¼‰ï¼Œå®è´åœ¨ç¬¬${j}è¯¾çš„æ­£ç¡®ç‡å·²æå‡è‡³ ${c}%ï¼Œ${h}ä¸ªç™¾åˆ†ç‚¹çš„è·¨è¶Šæ¸…æ™°å±•ç°äº†è¿›æ­¥ï¼`}:{status:"potential",title:"åšæŒæ€è€ƒï¼Œæ½œåŠ›æ— é™",content:`å€¼å¾—ç‚¹èµï¼ä»è¯¾å‰åˆ°ç¬¬${j}èŠ‚è¯¾çš„å…¨ç¨‹å­¦ä¹ ï¼Œå®è´å±•ç°äº†å‡ºè‰²çš„åšæŒä¸æ€è€ƒä¹ æƒ¯ã€‚é¢å¯¹ä¸æ–­å‡çº§çš„æŒ‘æˆ˜ä»å…´è¶£ç›ç„¶ï¼Œè¿™ä»½ä¸“æ³¨åŠ›æ˜¯æœªæ¥çªç ´çš„æœ€å¤§æ½œåŠ›ã€‚`}}return{status:"stable",title:"ä¿æŒçŠ¶æ€",content:"å±•ç°äº†å‡ºè‰²çš„å­¦ä¹ ä¹ æƒ¯ï¼Œé¢å¯¹æŒ‘æˆ˜æ¯«ä¸é€€ç¼©ã€‚ä¿æŒè¿™ä»½ä¸“æ³¨åŠ›ï¼Œä¸‹ä¸€æ¬¡çªç ´å°±åœ¨çœ¼å‰ï¼"}}function xt(s){const r=s.find(a=>a.unitNumber===0),i=s.filter(a=>a.unitNumber>0).sort((a,c)=>a.unitNumber-c.unitNumber);if(i.length===0)return{status:"stable",title:"å­¦ä¹ è¶³è¿¹",content:"æš‚æ— è®°å½•ï¼ŒæœŸå¾…å®è´ç²¾å½©è¡¨ç°ã€‚"};const l=i[i.length-1];let n=i.length>=2;for(let a=1;a<i.length;a++)if(i[a].wrongCount>=i[a-1].wrongCount){n=!1;break}if(n)return{status:"success",title:"æ­¥æ­¥ä¸ºè¥ï¼Œé£é€Ÿè¿›æ­¥",content:"æ­¥æ­¥ä¸ºè¥ï¼Œé”™é¢˜æŒç»­å‡å°‘ï¼Œå­¦ä¹ ä¹ æƒ¯ä¸æ•ˆæœä¿±ä½³ï¼Œè¿›æ­¥é£é€Ÿï¼"};if(r){if(l.wrongCount<r.wrongCount)return{status:"improving",title:"æˆæ•ˆæ˜¾è‘—",content:"é”™é¢˜æ—¥ç›Šå‡å°‘ï¼Œå¯è§çŸ¥è¯†æŒæ¡è¶Šå‘æ‰å®ç‰¢å›ºï¼"};if(l.wrongCount>r.wrongCount)return{status:"extension",title:"æ€ç»´æ‹“å±•",content:"æŒ‘æˆ˜å‡çº§ï¼Œæ•¢äºå°è¯•å¤æ‚é¢˜ç›®ï¼Œæ­£æ˜¯æ€ç»´æ·±å…¥æ‹“å±•çš„è¡¨ç°ï¼"}}return{status:"stable",title:"ä¸“æ³¨æ”»å…‹",content:"æ¯ä¸€é“é”™é¢˜çš„è®¢æ­£éƒ½æ˜¯ä¸€æ¬¡æ€ç»´çš„é‡å¡‘ï¼Œä¿æŒè¿™ç§è®¤çœŸçš„å­¦ä¹ æ€åº¦ã€‚"}}function mt(s){if(s.length===0)return{status:"stable",title:"ç¨³æ­¥æå‡",content:"ç»§ç»­ä¿æŒè‰¯å¥½çš„å­¦ä¹ çŠ¶æ€ï¼"};const r=s[0],i=s[s.length-1],l=s.every(a=>a.accuracy>=a.classAccuracy),n=i.accuracy>r.accuracy;return l&&n?{status:"rising",title:"æŒç»­é¢†å…ˆä¸”ä¸Šå‡",content:"è¡¨ç°ä¼˜ç§€ä¸”æŒç»­è¿›æ­¥ï¼å„å•å…ƒæ­£ç¡®ç‡å‡é«˜äºç­çº§å¹³å‡æ°´å¹³å¹¶ç¨³æ­¥ä¸Šå‡ã€‚"}:l?{status:"above",title:"æ•´ä½“é¢†å…ˆ",content:"æ•´ä½“è¡¨ç°ç¨³å®šé¢†å…ˆï¼åŸºç¡€æ‰å®ï¼Œä¿æŒè¿™ä¸ªèŠ‚å¥ã€‚"}:{status:"stable",title:"ç´§è·Ÿæ­¥ä¼",content:"è¡¨ç°ç¨³å®šï¼Œè·Ÿç´§ç­çº§æ­¥ä¼ï¼Œçªç ´è–„å¼±ç¯èŠ‚æœ‰æœ›å®ç°é¢†å…ˆã€‚"}}const ut=s=>{const r=new Map;return s.forEach(i=>{r.has(i.real_name)||r.set(i.real_name,{name:i.real_name,grade:re(i.package_grade),teacher:i.counselor_name,unitCount:0,lastUnit:0});const l=r.get(i.real_name);l.unitCount++,l.lastUnit=Math.max(l.lastUnit,parseInt(String(i.level_sequence),10))}),Array.from(r.values())},ht=({onDataLoaded:s,role:r,onRoleChange:i})=>{const[l,n]=x.useState(null),[a,c]=x.useState(!1),h=o=>{n(null);const y=new FileReader;y.onload=N=>{var v;try{const M=(v=N.target)==null?void 0:v.result,T=Te(M,{type:"binary"}),u=T.Sheets[T.SheetNames[0]],b=Be.sheet_to_json(u),k=ct(b);if(!k.valid)return n(k.error||"æ— æ•ˆæ–‡ä»¶");s(b)}catch{n("è§£ææ–‡ä»¶å‡ºé”™")}},y.readAsBinaryString(o)},j=o=>{o.preventDefault(),c(o.type==="dragenter"||o.type==="dragover")},g=o=>{var y;o.preventDefault(),c(!1),(y=o.dataTransfer.files)!=null&&y[0]&&h(o.dataTransfer.files[0])};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-12 space-y-6",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[e.jsxs("button",{onClick:()=>i("counselor"),className:`flex items-center gap-2 px-8 py-3 rounded-2xl font-black transition-all ${r==="counselor"?"bg-indigo-600 text-white shadow-lg scale-105":"bg-white text-indigo-300 border-2 border-indigo-50 hover:bg-indigo-50"}`,children:[e.jsx(Ie,{className:"w-5 h-5"})," è¯¾å¯¼æ¨¡å¼"]}),e.jsxs("button",{onClick:()=>i("headteacher"),className:`flex items-center gap-2 px-8 py-3 rounded-2xl font-black transition-all ${r==="headteacher"?"bg-indigo-600 text-white shadow-lg scale-105":"bg-white text-indigo-300 border-2 border-indigo-50 hover:bg-indigo-50"}`,children:[e.jsx(fe,{className:"w-5 h-5"})," ç­ä¸»ä»»æ¨¡å¼"]})]}),e.jsx("div",{className:`p-10 bg-white rounded-[2.5rem] shadow-xl border-4 border-dashed transition-all
          ${a?"border-indigo-400 bg-indigo-50":"border-slate-100"}
          ${l?"border-red-200 bg-red-50":""}`,onDragEnter:j,onDragLeave:j,onDragOver:j,onDrop:g,children:e.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[e.jsx("div",{className:`p-6 rounded-full shadow-sm ${l?"bg-red-100":"bg-indigo-100"}`,children:e.jsx(Re,{className:`w-12 h-12 ${l?"text-red-500":"text-indigo-500"}`})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800",children:"ä¸Šä¼ å­¦ä¹ æ•°æ® Excel"}),e.jsx("p",{className:"text-slate-400 font-bold max-w-sm",children:"è¯·ä¸Šä¼ ç­çº§å­¦ä¹ è®°å½•è¡¨æ ¼ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ ¹æ®æ‰€é€‰èº«ä»½ç”Ÿæˆç²¾ç¾æŠ¥å‘Š"}),e.jsxs("label",{className:"cursor-pointer bg-slate-800 hover:bg-slate-900 text-white font-black px-12 py-4 rounded-3xl transition-all shadow-xl hover:-translate-y-1 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-6 h-6"})," é€‰æ‹©æ–‡ä»¶",e.jsx("input",{type:"file",accept:".xlsx, .xls",className:"hidden",onChange:o=>{var y;return((y=o.target.files)==null?void 0:y[0])&&h(o.target.files[0])}})]})]})})]})},gt=({data:s,color:r="#f97316",isZoomed:i=!1,metric:l="accuracy"})=>{const n=l,a=l==="accuracy"?"classAccuracy":"classPassRate",c=l==="accuracy"?"ä½œç­”æ­£ç¡®ç‡":"è¿‡å…³ç‡",h=s.map(g=>({name:g.unitNumber,displayOrder:String(g.unitNumber),fullName:g.unitName,value:g[n],classAverage:g[a]})),j=()=>{if(!i||h.length===0)return[0,100];const g=h.flatMap(N=>[N.value,N.classAverage]).filter(N=>typeof N=="number");if(g.length===0)return[0,100];const o=Math.min(...g);return[Math.max(0,Math.floor(o-5)),100]};return e.jsx("div",{className:"w-full h-full flex flex-col font-sans",children:e.jsx("div",{className:"flex-grow min-h-0",children:e.jsx(tt,{width:"100%",height:"100%",children:e.jsxs(st,{data:h,margin:{top:20,right:30,left:0,bottom:20},children:[e.jsx(at,{strokeDasharray:"3 3",vertical:!1,stroke:"#e7e5e4"}),e.jsx(nt,{dataKey:"displayOrder",tick:{fontSize:12,fill:"#78716c",fontWeight:800},axisLine:!1,tickLine:!1,padding:{left:20,right:20}}),e.jsx(rt,{domain:j(),tick:{fontSize:12,fill:"#78716c",fontWeight:700},axisLine:!1,tickLine:!1,width:35}),e.jsx(lt,{formatter:(g,o)=>[`${g.toFixed(1)}%`,o==="value"?`æˆ‘çš„${c}`:`ç­çº§å¹³å‡${c}`],contentStyle:{borderRadius:"16px",border:`2px solid ${r}`,backgroundColor:"#fff",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",fontFamily:"Nunito, sans-serif",color:"#44403c",fontWeight:"bold"},labelFormatter:g=>`ç¬¬ ${g} å•å…ƒ`,cursor:{stroke:r,strokeWidth:2,strokeDasharray:"4 4"}}),e.jsx(me,{type:"monotone",dataKey:"classAverage",name:"classAverage",stroke:"#cbd5e1",strokeWidth:4,strokeDasharray:"8 8",dot:{r:0},activeDot:!1}),e.jsx(me,{connectNulls:!0,type:"monotone",dataKey:"value",name:"value",stroke:r,strokeWidth:5,dot:{r:6,fill:"#fff",stroke:r,strokeWidth:4},activeDot:{r:9,fill:r,stroke:"#fff",strokeWidth:3}})]})})})})},ae={default:{id:"default",label:"ç»å…¸æš–é˜³",icon:e.jsx(se,{className:"w-4 h-4"}),containerClass:"rounded-[3.5rem] border-[6px] shadow-2xl",cardClass:"rounded-[2rem] border-2 shadow-sm",headerClass:"border-b-4",showPattern:!0,backgroundPattern:"https://www.transparenttextures.com/patterns/confetti.png",colors:{bgMain:"bg-white",textMain:"text-stone-700",textMuted:"text-stone-400",headerBg:"bg-[#FFF8E1]",headerText:"text-amber-800",primary:"bg-amber-400 hover:bg-amber-500 text-white shadow-[0_4px_0_#d97706]",secondary:"bg-white border-2 border-stone-200 text-stone-400 hover:border-red-200 hover:text-red-500",border:"border-amber-100",profileBg:"bg-sky-50",badgesBg:"bg-[#fffbf0]",statsBg:"bg-stone-50",chartBg:"bg-[#fffaf5]",tableHeader:"bg-stone-50 text-stone-500",teacherSection:"bg-sky-50 border-amber-100",rankingHeaderBg:"bg-blue-50 border-blue-100",rankingHighlightRow:"bg-amber-50",rankingBannerBg:"bg-[#ff8a80]",rankingBannerText:"text-white"}},boy:{id:"boy",label:"æ˜Ÿé™…æ¢ç´¢",icon:e.jsx(ne,{className:"w-4 h-4"}),containerClass:"rounded-[3rem] border-[5px] shadow-[0_10px_50px_rgba(59,130,246,0.15)]",cardClass:"rounded-[2.5rem] border-2 border-b-4",headerClass:"border-b-4 border-blue-900/10",showPattern:!0,backgroundPattern:"https://www.transparenttextures.com/patterns/cubes.png",colors:{bgMain:"bg-slate-50",textMain:"text-slate-800",textMuted:"text-slate-400",headerBg:"bg-blue-100",headerText:"text-blue-900",primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-[0_4px_0_#1e3a8a]",secondary:"bg-white border-2 border-slate-300 text-slate-500 hover:border-blue-500 hover:text-blue-600",border:"border-blue-200",profileBg:"bg-white",badgesBg:"bg-gradient-to-br from-blue-50 to-slate-100",statsBg:"bg-slate-100",chartBg:"bg-white",tableHeader:"bg-slate-200 text-slate-600 uppercase tracking-wider",teacherSection:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-none",rankingHeaderBg:"bg-blue-100 border-blue-200",rankingHighlightRow:"bg-blue-50",rankingBannerBg:"bg-blue-500",rankingBannerText:"text-white"}},girl:{id:"girl",label:"æ¢¦å¹»äº‘æœµ",icon:e.jsx(Xe,{className:"w-4 h-4"}),containerClass:"rounded-[4rem] border-[8px] border-double shadow-2xl ring-8 ring-rose-50",cardClass:"rounded-[2.5rem] border-2 border-dashed shadow-[4px_4px_0px_rgba(253,164,175,0.3)]",headerClass:"border-b-[3px] border-dashed",showPattern:!0,backgroundPattern:"https://www.transparenttextures.com/patterns/hearts.png",colors:{bgMain:"bg-[#fffcfd]",textMain:"text-stone-600",textMuted:"text-rose-200",headerBg:"bg-rose-50",headerText:"text-stone-700",primary:"bg-rose-200 hover:bg-rose-300 text-stone-700 shadow-[0_4px_0_#fda4af]",secondary:"bg-white/80 border-2 border-rose-100 text-rose-300 hover:bg-white",border:"border-rose-100",profileBg:"bg-white/60 backdrop-blur-sm",badgesBg:"bg-gradient-to-b from-rose-50/20 to-white/50",statsBg:"bg-rose-50/40",chartBg:"bg-white/60",tableHeader:"bg-rose-50 text-rose-300",teacherSection:"bg-stone-50 border-rose-100",rankingHeaderBg:"bg-stone-50 border-stone-100",rankingHighlightRow:"bg-rose-50",rankingBannerBg:"bg-stone-400",rankingBannerText:"text-white"}}},pt=(s,r,i)=>{const l=new Map;s.forEach(a=>{const c=i==="headteacher",h=parseInt(String(a.level_sequence),10),j=parseInt(String(a.unit_sequence),10);if(c){if(h!==r.max)return}else if(isNaN(h)||h<r.min||h>r.max)return;l.has(a.real_name)||l.set(a.real_name,{accuracies:{},totalScore:0,avgAccuracy:0,count:0,id:a.user_id});const g=l.get(a.real_name),o=E(a.answer_right_rate);g.accuracies[j]=o});const n=Array.from(l.entries()).map(([a,c])=>{let h=0,j=0,g=0;return i==="headteacher"?[0,1,2,3,4,5].forEach(o=>{c.accuracies[o]!==void 0&&(h+=c.accuracies[o])}):Object.values(c.accuracies).forEach(o=>{j+=o,g++}),{name:a,userId:c.id,accuracies:c.accuracies,totalScore:Math.round(h),avgAccuracy:g>0?j/g:0,rank:0}});return i==="headteacher"?n.sort((a,c)=>c.totalScore-a.totalScore):n.sort((a,c)=>c.avgAccuracy-a.avgAccuracy),n.forEach((a,c)=>a.rank=c+1),{rankings:n,total:n.length}},pe=[0,1,2,3,4,5],ft=({data:s,rawData:r,onBack:i,availableUnits:l,currentRange:n,onRangeChange:a,currentTheme:c,onThemeChange:h,selectedCurriculumKey:j,setSelectedCurriculumKey:g,onSwitchStudentById:o,isChartZoomed:y,onToggleZoom:N,trendMetric:v,onToggleMetric:M,customUnitNames:T,onUpdateCustomUnitNames:u,customAssociations:b,onUpdateCustomAssociations:k,customKPCounts:m,onUpdateCustomKPCounts:S,customErrorCounts:O,onUpdateCustomErrorCounts:H})=>{var oe;const _=ae[c],p=_.colors,d=s.role==="headteacher",L=x.useRef(null),[W,P]=x.useState(""),[K,C]=x.useState(!1),[B,Y]=x.useState(!1),[Z,J]=x.useState(T.join(`
`)),[f,I]=x.useState(b.join(`
`)),[F,X]=x.useState(m.join(`
`)),[V,Q]=x.useState(O.join(`
`)),U=Ne[j]||[],{rankings:D,total:le}=x.useMemo(()=>pt(r,n,s.role),[r,n,s.role]),ie=D.find(t=>t.name===s.studentName),ye=x.useMemo(()=>{const t=D.findIndex(w=>w.name===s.studentName);return t===-1?[]:D.slice(Math.max(0,t-5),Math.min(D.length,t+6))},[D,s.studentName]),ve=()=>{u(Z.split(`
`).map(t=>t.trim())),d||(k(f.split(`
`).map(t=>t.trim())),S(F.split(`
`).map(t=>t.trim())),H(V.split(`
`).map(t=>t.trim()))),C(!1)},Se=async()=>{if(L.current){Y(!0);try{const t={quality:1,pixelRatio:2,backgroundColor:c==="boy"?"#f8fafc":"#ffffff",style:{width:"1200px",maxWidth:"1200px",margin:"0",padding:"0",transform:"none"},preferredFontFormat:"woff2"};await ce(L.current,t);const w=await ce(L.current,t),A=await(await fetch(w)).blob();try{await navigator.clipboard.write([new ClipboardItem({"image/png":A})]),alert("æŠ¥å‘Šå›¾ç‰‡å·²å®Œç¾ç”Ÿæˆå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼")}catch{const G=document.createElement("a");G.download=`${s.studentName}_å­¦æƒ…æŠ¥å‘Š.png`,G.href=w,G.click(),alert("å·²æˆåŠŸç”Ÿæˆå›¾ç‰‡å¹¶å¼€å§‹ä¸‹è½½ã€‚")}}catch(t){console.error("Export error details:",t),alert("æˆªå›¾ç”Ÿæˆå¤±è´¥ã€‚é€šå¸¸æ˜¯å› ä¸ºç½‘ç»œè¾ƒæ…¢å¯¼è‡´å­—ä½“åŠ è½½è¶…æ—¶ï¼Œè¯·ç¨ç­‰ç‰‡åˆ»åé‡è¯•ã€‚")}finally{Y(!1)}}},ke=t=>{if(t===0)return"è¯¾å‰æµ‹";const w=T[t-1];return w&&w.trim()?w:d&&t>=1&&t<=5?U[t-1]||`ç¬¬${t}è®²`:d?`ç¬¬${t}è®²`:`ç¬¬${t}å•å…ƒ`},Ce=t=>d||t===0?"":b[t-1]||"",z=x.useMemo(()=>s.units.map(t=>{const w=ke(t.unitNumber),$=t.status==="low"?`ã€${w}ã€‘ç­‰ä½ æŒ‘æˆ˜`:t.analysis;return{...t,unitName:w,association:Ce(t.unitNumber),analysis:$}}),[s.units,d,U,T,b]),ee=x.useMemo(()=>{if(d||z.length!==4)return null;let t=0,w=0;const $=[],A=[];return z.forEach(R=>{const G=R.unitNumber-1;t+=parseInt(m[G]||"0"),w+=parseInt(O[G]||"0"),R.accuracy>R.classAccuracy?$.push(R.unitName):A.push(R.unitName)}),{totalKPs:t,totalErrors:w,totalMinutes:Math.ceil(s.totalTimeSeconds/60),highPerformersJoined:$.join("ã€"),lowPerformersJoined:A.join("ã€")}},[d,z,m,O,s.totalTimeSeconds]),_e=t=>{if(!t)return null;const w=t.includes("é«˜é¢‘"),$=t.includes("é‡ç‚¹"),A=t.includes("æ‹“å±•")||t.includes("æ€ç»´"),R="flex items-center justify-center px-3 h-6 rounded-lg border text-[10px] font-black leading-none whitespace-nowrap";return w?e.jsxs("span",{className:`${R} bg-rose-50 text-rose-500 border-rose-200 shadow-[2px_2px_0_rgba(244,63,94,0.1)]`,children:["ğŸ”¥ ",t]}):$?e.jsx("span",{className:`${R} bg-indigo-50 text-indigo-500 border-indigo-100`,children:t}):A?e.jsxs("span",{className:`${R} bg-emerald-50 text-emerald-500 border-emerald-100`,children:["ğŸ’¡ ",t]}):e.jsx("span",{className:`${R} bg-slate-50 text-slate-400 border-slate-100`,children:t})},$e=()=>{if(!ie)return"ç»§ç»­åŠªåŠ›ï¼Œäº‰å–æ›´å¥½çš„æˆç»©ï¼";const{rank:t}=ie,w=t/(le||1);return t===1?"ç‹¬å é³Œå¤´ï¼ä½ æ˜¯å…¨ç­æœ€é—ªäº®çš„å­¦ä¹ æ˜æ˜Ÿï¼Œå±•ç°äº†éå‡¡çš„æŒæ¡åŠ›ï¼":t<=3?"ååˆ—å‰èŒ…ï¼ä¼˜ç§€çš„å­¦ä¹ ä¹ æƒ¯æ˜¯ä½ æˆåŠŸçš„åŸºçŸ³ï¼Œä¿æŒè¿™ä»½å†²åŠ²ï¼":w<=.2?"è¡¨ç°ä¼˜å¼‚ï¼å·²è¿›å…¥ç­çº§ç¬¬ä¸€æ¢¯é˜Ÿï¼Œç»§ç»­ä¿æŒç¨³å¥çš„æ­¥ä¼ï¼Œå†²åˆºå·…å³°ï¼":w<=.5?"è¿›æ­¥æ˜¾è‘—ï¼ä½ æ­£èµ°åœ¨ç¨³æ­¥æå‡çš„é˜¶æ¢¯ä¸Šï¼Œç¦»å°–å­ç”Ÿè¡Œåˆ—ä»…ä¸€æ­¥ä¹‹é¥ï¼":"æ½œåŠ›æ— é™ï¼ä¿æŒä¸“æ³¨ä¸è€å¿ƒï¼Œæ¯ä¸€ä»½æ±—æ°´éƒ½ä¼šåœ¨æœªæ¥çš„è€ƒè¯•ä¸­å¼€å‡ºç¿çƒ‚ä¹‹èŠ±ï¼"};return e.jsxs("div",{className:`max-w-6xl mx-auto my-6 font-sans ${p.textMain}`,children:[e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row justify-between items-center px-4 gap-4 print:hidden",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("button",{onClick:i,className:"bg-white px-6 py-2.5 rounded-full border-2 border-slate-100 shadow-sm font-black flex items-center gap-2 transition-all hover:scale-105 active:scale-95",children:[e.jsx(Le,{className:"w-5 h-5"}),"åˆ—è¡¨"]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),o(W),P("")},className:"relative group",children:[e.jsx(be,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-300 group-focus-within:text-indigo-400 transition-colors"}),e.jsx("input",{type:"text",value:W,onChange:t=>P(t.target.value),placeholder:"IDåˆ‡æ¢",className:"bg-white pl-10 pr-4 py-2.5 rounded-full border-2 border-slate-100 shadow-sm outline-none focus:border-indigo-100 font-bold text-sm w-32"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-center",children:[e.jsxs("button",{onClick:()=>C(!K),className:`bg-white px-4 py-2 rounded-full border-2 shadow-sm font-black text-xs flex items-center gap-2 transition-all ${K?"border-indigo-400 text-indigo-600":"border-slate-100 text-slate-400 hover:border-indigo-100"}`,children:[e.jsx(de,{className:"w-4 h-4"})," è®¾ç½®è¯¾ç¨‹ä¿¡æ¯"]}),e.jsx("div",{className:"bg-white p-1 rounded-full border-2 border-slate-100 shadow-sm flex",children:Object.keys(ae).map(t=>e.jsx("button",{onClick:()=>h(t),className:`px-4 py-1.5 rounded-full text-xs font-black transition-all ${c===t?"bg-slate-800 text-white shadow-md":"text-slate-400"}`,children:ae[t].label},t))}),!d&&e.jsxs("div",{className:"bg-white px-4 py-2 rounded-full border-2 border-slate-100 shadow-sm flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-slate-300"}),e.jsx("select",{value:n.min,onChange:t=>a(parseInt(t.target.value),n.max),className:"bg-transparent font-black text-sm outline-none cursor-pointer",children:l.map(t=>e.jsxs("option",{value:t,children:["ç¬¬",t,"å•å…ƒ"]},t))}),e.jsx("span",{className:"text-slate-200",children:"~"}),e.jsx("select",{value:n.max,onChange:t=>a(n.min,parseInt(t.target.value)),className:"bg-transparent font-black text-sm outline-none cursor-pointer",children:l.map(t=>e.jsxs("option",{value:t,children:["ç¬¬",t,"å•å…ƒ"]},t))})]}),e.jsxs("button",{onClick:Se,disabled:B,className:`px-8 py-2.5 rounded-full font-black flex items-center gap-2 transition-all active:translate-y-1 ${B?"opacity-50 cursor-not-allowed":""} ${p.primary}`,children:[B?e.jsx(Oe,{className:"w-5 h-5 animate-spin"}):e.jsx(Ue,{className:"w-5 h-5"}),B?"æ­£åœ¨ç”Ÿæˆ...":"1:1 ç²¾å‡†å¯¼å‡º"]})]})]}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-indigo-900 flex items-center gap-3",children:[e.jsx(de,{className:"w-8 h-8"})," æ‰‹åŠ¨æ‰¹é‡è®¾ç½®è¯¾ç¨‹ä¿¡æ¯"]}),e.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªå•å…ƒé¡ºåºã€‚è¯·ç¡®ä¿å„åˆ—è¡Œæ•°å¯¹é½ã€‚"})]}),e.jsx("button",{onClick:()=>C(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(Pe,{className:"w-8 h-8 text-slate-300"})})]}),e.jsxs("div",{className:`flex-grow overflow-y-auto p-8 grid ${d?"grid-cols-1":"grid-cols-4"} gap-6`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"å•å…ƒåç§°"}),e.jsx("textarea",{value:Z,onChange:t=>J(t.target.value),placeholder:"ç¬¬ä¸€è¡Œå¯¹åº”ç¬¬1å•å…ƒ/è®²...",className:"w-full h-64 bg-slate-50 border-2 border-slate-100 rounded-2xl p-3 text-xs font-bold focus:border-indigo-300 outline-none resize-none"})]}),!d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"å­¦ä¹ å…³è”"}),e.jsx("textarea",{value:f,onChange:t=>I(t.target.value),placeholder:"é«˜é¢‘è€ƒç‚¹/æ‹“å±•å†…å®¹...",className:"w-full h-64 bg-slate-50 border-2 border-slate-100 rounded-2xl p-3 text-xs font-bold focus:border-indigo-300 outline-none resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"çŸ¥è¯†ç‚¹æ•°é‡"}),e.jsx("textarea",{value:F,onChange:t=>X(t.target.value),placeholder:"12",className:"w-full h-64 bg-slate-50 border-2 border-slate-100 rounded-2xl p-3 text-xs font-bold focus:border-indigo-300 outline-none resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"æ˜“é”™ç‚¹æ•°é‡"}),e.jsx("textarea",{value:V,onChange:t=>Q(t.target.value),placeholder:"3",className:"w-full h-64 bg-slate-50 border-2 border-slate-100 rounded-2xl p-3 text-xs font-bold focus:border-indigo-300 outline-none resize-none"})]})]})]}),e.jsxs("div",{className:"p-8 border-t bg-slate-50/50 flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-8 py-3 rounded-full font-black text-slate-400 hover:text-slate-600 transition-colors",children:"æ”¾å¼ƒä¿®æ”¹"}),e.jsxs("button",{onClick:ve,className:"px-12 py-3 bg-indigo-600 text-white rounded-full font-black shadow-lg hover:bg-indigo-700 transition-all flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"ç¡®è®¤å¹¶åŒæ­¥"]})]})]})}),e.jsxs("div",{ref:L,id:"report-container-main",className:`${p.bgMain} ${_.containerClass} ${p.border} overflow-hidden relative print:shadow-none print:border-none print:rounded-none transition-all duration-700 mx-auto print:w-full`,children:[e.jsx("div",{className:`${p.headerBg} py-12 text-center relative border-b-4 ${p.border}`,children:e.jsxs("h1",{className:`text-4xl font-black ${p.headerText} tracking-tight drop-shadow-sm flex items-center justify-center gap-3 leading-tight`,children:[c==="boy"?e.jsx(ne,{className:"w-10 h-10 animate-pulse"}):e.jsx(De,{className:"w-10 h-10 text-yellow-300 fill-current"}),s.studentName," ",d?"ä¸“å±å­¦ä¹ æŠ¥å‘Š":`${n.min}-${n.max}å•å…ƒ å­¦ä¹ æŠ¥å‘Š`]})}),e.jsxs("div",{className:`flex flex-col md:flex-row border-b-4 ${p.border}`,children:[e.jsxs("div",{className:`w-full md:w-1/3 ${p.profileBg} p-10 border-b-4 md:border-b-0 md:border-r-4 ${p.border} flex flex-col justify-center`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:`w-16 h-16 rounded-3xl flex items-center justify-center border-4 shadow-sm ${c==="boy"?"bg-blue-600 text-white border-blue-200":"bg-rose-100 text-stone-500 border-white"}`,children:e.jsx(qe,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-2xl leading-none",children:"å­¦å‘˜æ¡£æ¡ˆ"}),e.jsx("p",{className:"text-xs opacity-40 font-bold uppercase tracking-widest mt-1",children:"Profile Card"})]})]}),e.jsxs("div",{className:`${_.cardClass} bg-white p-8 space-y-6`,children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsx("span",{className:"font-bold opacity-40 leading-none",children:"å§“å"}),e.jsx("span",{className:"font-black text-xl leading-none",children:s.studentName})]}),e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsx("span",{className:"font-bold opacity-40 leading-none",children:"å¹´çº§"}),e.jsx("span",{className:"flex items-center justify-center px-4 h-7 rounded-full bg-slate-100 font-bold text-sm leading-none",children:s.grade})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold opacity-40 leading-none",children:"è€å¸ˆ"}),e.jsx("span",{className:"font-bold leading-none",children:s.teacher})]})]})]}),e.jsxs("div",{className:`w-full md:w-2/3 ${p.badgesBg} p-10`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(He,{className:"w-8 h-8 text-amber-400"}),e.jsx("h3",{className:"text-2xl font-black leading-none",children:d?"å­¦ä¹ æˆé•¿å‹‹ç« ":"è£èª‰æˆå°±"})]}),d?e.jsx("div",{className:"grid grid-cols-2 gap-6",children:(oe=s.htBadges)==null?void 0:oe.map(t=>e.jsxs("div",{className:`${_.cardClass} bg-white/80 backdrop-blur-sm p-4 flex flex-col items-center justify-center shadow-sm`,children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-2 shadow-sm ${c==="boy"?"bg-blue-600 text-white":"bg-rose-50 text-rose-300"}`,children:t.level==="progress"?e.jsx(xe,{className:"w-6 h-6"}):t.level==="potential"?e.jsx(ne,{className:"w-6 h-6"}):e.jsx(se,{className:"w-6 h-6"})}),e.jsx("h4",{className:"font-black text-sm mb-1 leading-none text-center",children:t.name}),e.jsx("div",{className:"flex gap-0.5 mb-2",children:[...Array(5)].map((w,$)=>e.jsx(se,{className:`w-3.5 h-3.5 ${$<(t.stars||0)?"text-yellow-400 fill-yellow-400":"text-slate-200 fill-slate-100"}`},$))}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400/80 text-center leading-tight italic",children:["â€œ",t.description,"â€"]})]},t.name))}):e.jsxs("div",{className:"flex gap-10",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:`w-28 h-28 rounded-[2rem] flex items-center justify-center shadow-lg transform rotate-3 mb-4 ${c==="boy"?"bg-amber-400 border-4 border-white":"bg-rose-50 border-rose-100 border-2"}`,children:e.jsx(se,{className:`w-12 h-12 ${c==="boy"?"text-white":"text-rose-300"}`})}),e.jsx("p",{className:"font-black text-lg mb-2 leading-none text-center",children:s.completionBadge.name}),e.jsx("div",{className:`${_.cardClass} bg-white/60 p-4 text-center text-xs font-bold leading-relaxed`,children:s.completionBadge.description})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:`w-28 h-28 rounded-[2rem] flex items-center justify-center shadow-lg transform -rotate-3 mb-4 ${c==="boy"?"bg-blue-600 border-4 border-white":"bg-amber-50 border-amber-100 border-2"}`,children:e.jsx(Ke,{className:"w-12 h-12 text-white"})}),e.jsx("p",{className:"font-black text-lg mb-2 leading-none text-center",children:s.accuracyBadge.name}),e.jsx("div",{className:`${_.cardClass} bg-white/60 p-4 text-center text-xs font-bold leading-relaxed`,children:s.accuracyBadge.description})]})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:`w-full ${d?"lg:w-[45%]":"lg:w-[55%]"} border-b-4 lg:border-b-0 lg:border-r-4 ${p.border} bg-white p-8 flex flex-col`,children:[e.jsxs("div",{className:"flex flex-col mb-8",children:[e.jsxs("h3",{className:"text-2xl font-black flex items-center gap-3 whitespace-nowrap leading-none",children:[e.jsx(We,{className:"w-8 h-8 text-indigo-500"}),d?`${s.studentName}åŒå­¦ å­¦ä¹ è®°å½•`:"å­¦ä¹ é—¯å…³è®°å½•"]}),e.jsx("div",{className:"mt-2 flex items-center justify-center px-6 h-8 bg-indigo-50 rounded-full text-indigo-600 font-black text-xs w-fit leading-none shadow-sm",children:"ä¸€èŠ‚è¯¾20åˆ†é’Ÿï¼ŒçŸ­æ—¶é«˜æ•ˆï¼Œæ¯å¤©ç»ƒå‡ºæ•ˆæœï¼"})]}),d&&s.errorAnalysis&&e.jsx("div",{className:"mb-6 p-5 bg-rose-50 rounded-[1.5rem] border-2 border-rose-100 shadow-sm animate-in slide-in-from-left duration-500 flex items-center",children:e.jsxs("p",{className:"text-xs font-bold text-rose-800/80 leading-relaxed italic",children:["â€œ",s.errorAnalysis.content,"â€"]})}),e.jsx("div",{className:`${_.cardClass} border-2 overflow-hidden flex-grow`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:p.tableHeader,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-4 text-left leading-none",children:"å•å…ƒå†…å®¹"}),!d&&e.jsx("th",{className:"px-4 py-4 text-center leading-none",children:"å­¦ä¹ å…³è”"}),e.jsx("th",{className:"px-4 py-4 text-center leading-none",children:"å­¦ä¹ æ—¶é•¿"}),!d&&e.jsx("th",{className:"px-4 py-4 text-center leading-none",children:"å­¦ä¹ åˆ†æ"}),d&&e.jsx("th",{className:"px-4 py-4 text-right leading-none",children:"é”™è¯¯ç»Ÿè®¡"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:z.map((t,w)=>{const $=Math.max(...z.map(R=>R.wrongCount),1),A=t.wrongCount/$*80;return e.jsxs("tr",{className:`transition-colors ${w%2===0?"bg-white":"bg-slate-50/50"} hover:bg-slate-100`,children:[e.jsx("td",{className:"px-4 py-5 font-black whitespace-nowrap text-xs leading-none",children:t.unitName}),!d&&e.jsx("td",{className:"px-4 py-5 text-center align-middle",children:_e(t.association)}),e.jsx("td",{className:"px-4 py-5 text-center font-bold opacity-50 text-xs leading-none",children:it(t.timeSpentSeconds)}),!d&&e.jsx("td",{className:`px-4 py-5 text-center font-black text-[11px] whitespace-nowrap leading-none ${t.status==="low"?"text-slate-300":"text-indigo-500"}`,children:t.analysis}),d&&e.jsx("td",{className:"px-4 py-5 text-right min-w-[120px]",children:e.jsxs("div",{className:"flex items-center justify-end gap-3 h-full",children:[e.jsx("div",{className:"h-2 bg-rose-100 rounded-full overflow-hidden w-20 flex-shrink-0",children:e.jsx("div",{className:"h-full bg-rose-400 rounded-full",style:{width:`${A}%`}})}),e.jsx("span",{className:"font-black text-rose-400 text-xs w-6 text-right leading-none",children:t.wrongCount})]})})]},t.unitNumber)})})]})})}),!d&&ee&&e.jsx("div",{className:"mt-8 space-y-6 animate-in fade-in duration-500",children:e.jsxs("div",{className:`${_.cardClass} bg-indigo-600 text-white p-8 relative overflow-hidden shadow-xl`,children:[e.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"}),e.jsxs("h4",{className:"text-xl font-black flex items-center gap-3 mb-6 leading-none",children:[e.jsx(ze,{className:"w-6 h-6"})," ğŸ“ˆ å­¦ä¹ é‡Œç¨‹ç¢‘"]}),e.jsxs("p",{className:"text-sm font-bold leading-loose opacity-90",children:["æœ¬æœˆä½ ç´¯è®¡å­¦ä¹  ",e.jsx("span",{className:"text-yellow-300 text-lg mx-1 leading-none",children:ee.totalMinutes})," åˆ†é’Ÿï¼Œæ¯ä¸€åˆ†é’Ÿï¼Œéƒ½åœ¨æŠŠè–„å¼±å˜æˆå¼ºé¡¹ã€‚å®Œæˆã€",e.jsx("span",{className:"text-yellow-300 text-lg mx-1 leading-none",children:ee.totalKPs}),"ä¸ªçŸ¥è¯†ç‚¹ã€‘ç›¸å½“äºæ”»å…‹äº† ",e.jsx("span",{className:"text-yellow-300 text-lg mx-1 leading-none",children:ee.totalErrors}),"ä¸ªé«˜é¢‘æ˜“é”™ç‚¹ï¼Œæ‰«æ¸…å¹´çº§çŸ¥è¯†ç›²åŒºã€‚"]})]})})]}),e.jsxs("div",{className:`w-full ${d?"lg:w-[55%]":"lg:w-[45%]"} ${p.chartBg} p-8 flex flex-col`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-8",children:[e.jsxs("h3",{className:"text-2xl font-black flex items-center gap-3 whitespace-nowrap leading-none",children:[e.jsx(Ge,{className:"w-8 h-8 text-amber-500"}),d?`${s.studentName}åŒå­¦ æ­£ç¡®ç‡è¶‹åŠ¿`:"è¶‹åŠ¿åˆ†æ"]}),e.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>M("accuracy"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black transition-all ${v==="accuracy"?"bg-white shadow-sm text-indigo-600":"text-slate-400"} leading-none`,children:"æ­£ç¡®ç‡"}),e.jsx("button",{onClick:()=>M("passRate"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black transition-all ${v==="passRate"?"bg-white shadow-sm text-indigo-600":"text-slate-400"} leading-none`,children:"è¿‡å…³ç‡"})]}),d&&e.jsx("button",{onClick:N,className:`p-2 rounded-xl border-2 transition-all ${y?"bg-amber-100 border-amber-300 text-amber-700":"bg-white text-slate-400"}`,children:y?e.jsx(Je,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:`${_.cardClass} bg-white p-6 h-[400px] mb-8 relative shadow-md border-indigo-50 border-4`,children:e.jsx(gt,{data:z,color:d?"#818cf8":"#f97316",isZoomed:d&&y,metric:v})}),e.jsxs("div",{className:`${_.cardClass} bg-white p-6 shadow-sm border-2 ${p.border} flex flex-col justify-center min-h-[100px]`,children:[e.jsxs("h4",{className:`text-lg font-black mb-4 flex items-center gap-2 ${p.headerText} leading-none`,children:[e.jsx(xe,{className:"w-5 h-5 text-yellow-400 fill-current"}),s.trendAnalysis.title]}),e.jsxs("p",{className:"font-bold text-sm leading-relaxed opacity-80 italic",children:["â€œ",s.trendAnalysis.content,"â€"]})]})]})]}),e.jsx("div",{className:"bg-white p-10",children:e.jsxs("div",{className:`${_.cardClass} border-2 ${p.border} overflow-hidden shadow-sm`,children:[e.jsxs("div",{className:`${p.rankingHeaderBg} p-6 border-b flex justify-between items-center`,children:[e.jsxs("h3",{className:"text-2xl font-black flex items-center gap-3 leading-none",children:[e.jsx(Ye,{className:"w-8 h-8 text-stone-400"}),"æ­£ç¡®ç‡æ’å"]}),e.jsxs("span",{className:"font-bold text-xs opacity-40 leading-none",children:["å…±æœ‰ ",le," åå­¦å‘˜å‚ä¸ç»Ÿè®¡"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50/80 text-slate-400 font-bold text-[10px] uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left w-20 leading-none text-center",children:"åæ¬¡"}),e.jsx("th",{className:"px-6 py-4 text-left leading-none",children:"å§“å"}),e.jsx("th",{className:"px-6 py-4 text-left leading-none",children:"å­¦å· (UID)"}),d&&pe.map(t=>e.jsx("th",{className:`px-2 py-4 text-center whitespace-nowrap leading-none ${t===0?"bg-amber-50 text-amber-600 border-r-2 border-amber-100":""}`,children:t===0?"è¯¾å‰æµ‹":`L${t}`},t)),e.jsx("th",{className:"px-6 py-4 text-right leading-none",children:d?"ç»¼åˆå¾—åˆ†":"å¹³å‡æ­£ç¡®ç‡"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:ye.map(t=>{const w=t.name===s.studentName,$=w?t.name:(t.name.charAt(0)+"x".repeat(Math.min(t.name.length-1,1))).slice(0,4);return e.jsxs("tr",{className:`${w?p.rankingHighlightRow:"hover:bg-slate-50/50"} transition-all`,children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("span",{className:`w-9 h-9 rounded-2xl flex items-center justify-center font-black ${t.rank<=3?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-400"} ${w?"ring-4 ring-amber-400/20":""} leading-none text-center`,children:t.rank})})}),e.jsxs("td",{className:`px-6 py-5 font-black text-base ${w?"text-amber-600":"opacity-70"} flex items-center h-full`,children:[e.jsx("span",{className:"leading-none",children:$}),w&&e.jsx("span",{className:"ml-2 flex items-center justify-center text-[10px] bg-amber-400 text-white px-2 h-4 rounded-full font-sans uppercase leading-none font-black",children:"ME"})]}),e.jsx("td",{className:"px-6 py-5 font-black text-sm font-mono opacity-50 leading-none",children:t.userId}),d&&pe.map(A=>e.jsx("td",{className:`px-2 py-5 text-center font-bold text-[10px] ${A===0?"bg-amber-50/30 border-r-2 border-amber-100/50":""} ${t.accuracies[A]!==void 0?"text-slate-600":"text-slate-200"} leading-none`,children:t.accuracies[A]!==void 0?`${t.accuracies[A].toFixed(0)}%`:"-"},A)),e.jsx("td",{className:"px-6 py-5 text-right font-black text-lg whitespace-nowrap leading-none",children:d?t.totalScore:`${t.avgAccuracy.toFixed(1)}%`})]},t.userId)})})]})}),e.jsx("div",{className:`${p.rankingBannerBg} ${p.rankingBannerText} p-8 text-center font-black text-sm italic leading-relaxed`,children:$e()})]})}),e.jsx("div",{className:`${p.teacherSection} p-12 text-center relative overflow-hidden flex flex-col items-center justify-center`,children:e.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto flex flex-col items-center",children:[e.jsx(Ze,{className:"w-12 h-12 mx-auto mb-6 opacity-40"}),e.jsx("p",{className:"text-2xl font-black italic mb-4 opacity-90 leading-snug text-center",children:"â€œ å­¦ä¹ ä¸ä»…æ˜¯åˆ†æ•°çš„ç´¯ç§¯ï¼Œæ›´æ˜¯æ€ç»´çš„ç ´å£³è€Œå‡ºã€‚äº²çˆ±çš„å®¶é•¿ï¼Œå®è´æ­£åœ¨ç”¨æ¯ä¸€ä¸ªç™¾åˆ†ç‚¹çš„è¿›æ­¥ï¼Œä¹¦å†™å±äºè‡ªå·±çš„æœªæ¥ï¼è®©æˆ‘ä»¬å…±åŒå‘µæŠ¤è¿™ä»½æˆé•¿ã€‚ â€"}),e.jsxs("p",{className:"font-bold opacity-60 leading-none",children:["â€” æ‚¨çš„è¾…å¯¼è€å¸ˆ ",s.teacher]})]})})]})]})},bt=({data:s,onSelectStudent:r,onReupload:i})=>{const[l,n]=x.useState(""),[a,c]=x.useState("all"),h=x.useMemo(()=>ut(s),[s]),j=x.useMemo(()=>{const o=new Set(h.map(y=>y.grade));return Array.from(o).filter(Boolean)},[h]),g=x.useMemo(()=>h.filter(o=>{const y=o.name.toLowerCase().includes(l.toLowerCase())||o.teacher.toLowerCase().includes(l.toLowerCase()),N=a==="all"||o.grade===a;return y&&N}),[h,l,a]);return e.jsxs("div",{className:"max-w-5xl mx-auto my-8 space-y-6 font-sans",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border-2 border-indigo-100 p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-indigo-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-xl text-indigo-600",children:e.jsx(fe,{className:"w-6 h-6"})}),"å­¦ç”Ÿæ•°æ®åˆ—è¡¨"]}),e.jsxs("p",{className:"text-indigo-400 font-medium mt-2 ml-1",children:["å…±å¯¼å…¥ ",h.length," åå­¦ç”Ÿï¼Œ",s.length," æ¡å­¦ä¹ è®°å½•"]})]}),e.jsx("button",{onClick:i,className:"text-sm font-bold text-gray-400 hover:text-red-500 underline transition-colors",children:"é‡æ–°ä¸Šä¼ æ–‡ä»¶"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 bg-indigo-50/50 p-2 rounded-2xl border border-indigo-100",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(be,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-indigo-300"}),e.jsx("input",{type:"text",placeholder:"æœç´¢å§“åæˆ–è¾…å¯¼è€å¸ˆ...",value:l,onChange:o=>n(o.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border-2 border-transparent focus:border-indigo-300 rounded-xl text-indigo-800 placeholder-indigo-300 focus:outline-none focus:ring-0 font-medium transition-all"})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsx(we,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-indigo-300"}),e.jsxs("select",{value:a,onChange:o=>c(o.target.value),className:"w-full pl-12 pr-10 py-3 bg-white border-2 border-transparent focus:border-indigo-300 rounded-xl text-indigo-800 font-medium appearance-none focus:outline-none focus:ring-0 cursor-pointer transition-all",children:[e.jsx("option",{value:"all",children:"æ‰€æœ‰å¹´çº§"}),j.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 9l-7 7-7-7"})})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border-2 border-indigo-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-indigo-50/50 border-b border-indigo-100 text-indigo-400 uppercase font-bold text-xs tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5",children:"å­¦ç”Ÿå§“å"}),e.jsx("th",{className:"px-6 py-5",children:"å¹´çº§"}),e.jsx("th",{className:"px-6 py-5",children:"è¾…å¯¼è€å¸ˆ"}),e.jsx("th",{className:"px-6 py-5 text-center",children:"è®°å½•æ•°"}),e.jsx("th",{className:"px-6 py-5 text-center",children:"æœ€æ–°è¿›åº¦"}),e.jsx("th",{className:"px-6 py-5 text-right",children:"æ“ä½œ"})]})}),e.jsx("tbody",{className:"divide-y divide-indigo-50",children:g.length>0?g.map(o=>e.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"font-bold text-lg text-indigo-900",children:o.name})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-600",children:[e.jsx(Qe,{className:"w-3.5 h-3.5"}),o.grade]})}),e.jsx("td",{className:"px-6 py-5 font-medium text-gray-600",children:o.teacher}),e.jsx("td",{className:"px-6 py-5 text-center font-bold text-indigo-300",children:o.unitCount}),e.jsxs("td",{className:"px-6 py-5 text-center font-medium text-gray-500",children:["ç¬¬ ",o.lastUnit," å•å…ƒ"]}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("button",{onClick:()=>r(o.name),className:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-xs px-5 py-2.5 rounded-full transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:["ç”ŸæˆæŠ¥å‘Š",e.jsx(et,{className:"w-3.5 h-3.5"})]})})]},o.name)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-16 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-gray-400",children:[e.jsx("div",{className:"text-4xl",children:"ğŸ¤”"}),e.jsx("div",{className:"font-medium",children:"æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­¦ç”Ÿæ•°æ®"})]})})})})]})}),e.jsx("div",{className:"bg-indigo-50/30 px-6 py-4 border-t border-indigo-100 text-xs font-bold text-indigo-300 flex justify-between",children:e.jsxs("span",{children:["æ˜¾ç¤º ",g.length," / ",h.length," ä½å­¦ç”Ÿ"]})})]})]})},q={UNIT_NAMES:"xueqiu_custom_unit_names",ASSOCIATIONS:"xueqiu_custom_associations",KP_COUNTS:"xueqiu_custom_kp_counts",ERROR_COUNTS:"xueqiu_custom_error_counts"};function wt(){const[s,r]=x.useState("upload"),[i,l]=x.useState("counselor"),[n,a]=x.useState([]),[c,h]=x.useState(null),[j,g]=x.useState(null),[o,y]=x.useState([]),[N,v]=x.useState({min:1,max:1}),[M,T]=x.useState("default"),[u,b]=x.useState(Object.keys(Ne)[0]),[k,m]=x.useState(!1),[S,O]=x.useState("accuracy"),[H,_]=x.useState(()=>{const f=localStorage.getItem(q.UNIT_NAMES);return f?JSON.parse(f):[]}),[p,d]=x.useState(()=>{const f=localStorage.getItem(q.ASSOCIATIONS);return f?JSON.parse(f):[]}),[L,W]=x.useState(()=>{const f=localStorage.getItem(q.KP_COUNTS);return f?JSON.parse(f):[]}),[P,K]=x.useState(()=>{const f=localStorage.getItem(q.ERROR_COUNTS);return f?JSON.parse(f):[]});x.useEffect(()=>{localStorage.setItem(q.UNIT_NAMES,JSON.stringify(H)),localStorage.setItem(q.ASSOCIATIONS,JSON.stringify(p)),localStorage.setItem(q.KP_COUNTS,JSON.stringify(L)),localStorage.setItem(q.ERROR_COUNTS,JSON.stringify(P))},[H,p,L,P]);const C=f=>{a(f),r("list")},B=f=>{const I=ot(n,f);if(I.length===0)return alert("è¯¥å­¦ç”Ÿæ²¡æœ‰æœ‰æ•ˆæ•°æ®");const F=I[0],X=I[I.length-1];y(I),v({min:F,max:X}),g(f);const V=n.find(U=>U.real_name===f);if(V){const U=V.package_grade||"",D=U.toLowerCase().includes("one")?"ä¸€å¹´çº§":U.toLowerCase().includes("two")?"äºŒå¹´çº§":U.toLowerCase().includes("three")?"ä¸‰å¹´çº§":U.toLowerCase().includes("four")?"å››å¹´çº§":U.toLowerCase().includes("five")?"äº”å¹´çº§":U.toLowerCase().includes("six")?"å…­å¹´çº§":"";D&&!u.startsWith(D)&&b(D)}const Q=ge(n,f,i,{min:F,max:X});Q&&(h(Q),r("report"))},Y=f=>{const I=n.find(F=>String(F.user_id)===String(f));I?B(I.real_name):alert(`æœªæ‰¾åˆ° ID ä¸º ${f} çš„å­¦å‘˜`)},Z=(f,I)=>{if(!j)return;v({min:f,max:I});const F=ge(n,j,i,{min:f,max:I});F&&h(F)},J=()=>{a([]),h(null),g(null),r("upload")};return e.jsxs("div",{className:"min-h-screen pb-10 bg-slate-50 font-sans",children:[e.jsx("header",{className:"bg-white border-b-4 border-indigo-100 py-4 mb-8 shadow-sm print:hidden",children:e.jsx("div",{className:"container mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2",children:[e.jsx("h1",{className:"text-2xl font-black text-indigo-600 flex items-center gap-2 cursor-pointer",onClick:J,children:"ğŸ“ å­¦æƒ…åé¦ˆç”Ÿæˆå™¨"}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"ä½¿ç”¨é—®é¢˜å¯ç•™è¨€sundong@xueqiulearning.com"})]})})}),e.jsxs("main",{className:"container mx-auto px-4",children:[s==="upload"&&e.jsx(ht,{onDataLoaded:C,role:i,onRoleChange:l}),s==="list"&&e.jsx(bt,{data:n,onSelectStudent:B,onReupload:J}),s==="report"&&c&&e.jsx(ft,{data:c,rawData:n,onReset:J,onBack:()=>r("list"),availableUnits:o,currentRange:N,onRangeChange:Z,currentTheme:M,onThemeChange:T,selectedCurriculumKey:u,setSelectedCurriculumKey:b,onSwitchStudentById:Y,isChartZoomed:k,onToggleZoom:()=>m(!k),trendMetric:S,onToggleMetric:f=>O(f),customUnitNames:H,onUpdateCustomUnitNames:_,customAssociations:p,onUpdateCustomAssociations:d,customKPCounts:L,onUpdateCustomKPCounts:W,customErrorCounts:P,onUpdateCustomErrorCounts:K})]})]})}const je=document.getElementById("root");if(!je)throw new Error("Could not find root element to mount to");const Nt=Ae.createRoot(je);Nt.render(e.jsx(Me.StrictMode,{children:e.jsx(wt,{})}));
